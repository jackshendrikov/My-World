{% load static %}
<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Heartverse</title>
  <link rel="icon" href="{% static 'home/home/ico/logo.ico' %}" type="image/x-icon">
  <style type="text/css"> audio { display:none;} </style>
  <style>
    css-doodle {
      --color: @p(#8ef6e4, #9896f1, #d59bf6, #edb1f1);
      --rule: (
        :doodle {
          @grid: 30x1 / 18vmin;
          --deg: @p(-180deg, 180deg);
        }
        :container {
          perspective: 30vmin;
        }
        :after, :before {
          content: '';
          background: var(--color);
          @place-cell: @r(100%) @r(100%);
          @size: @r(6px);
          @shape: heart;
        }

        @place-cell: center;
        @size: 100%;

        box-shadow: @m2(0 0 50px var(--color));
        background: @m100(
          radial-gradient(var(--color) 50%, transparent 0)
          @r(-20%, 120%) @r(-20%, 100%) / 1px 1px
          no-repeat
        );

        will-change: transform, opacity;
        animation: scale-up 12s linear infinite;
        animation-delay: calc(-12s / @size() * @i());

        @keyframes scale-up {
          0%, 95.01%, 100% {
            transform: translateZ(0) rotate(0);
            opacity: 0;
          }
          10% {
            opacity: 1;
          }
          95% {
            transform:
              translateZ(35vmin) rotateZ(@var(--deg));
          }
        }
      )
    }
  </style>
  <css-doodle use="var(--rule)"></css-doodle>
  <link rel="stylesheet" href="{% static 'home/heartverse/style.css' %}">
</head>

<body>
<audio class="song" controls loop>
    <source src="{% static 'audio/careless_whisper.mp3' %}"/>
    Your browser isn't invited for super fun audio time.
</audio>

<script src='{% static 'libs/css-doodle.min.js' %}'></script>
<script src='{% static 'libs/jquery.min.js' %}'></script>
<script>
    setInterval(function () {
        let audio = $('.song')[0];
        audio.play();
    }, 2);
</script>
</body>
</html>